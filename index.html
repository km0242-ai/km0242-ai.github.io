<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BLACKSITE TERMINAL</title>

  <style>
    body {
      background: #050505;
      color: #00ff99;
      font-family: monospace;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #00ffff;
    }

    #log {
      white-space: pre-line;
      margin: 20px 0;
      line-height: 1.6;
    }

    button {
      background: #000;
      color: #00ff99;
      border: 1px solid #00ff99;
      padding: 8px 14px;
      margin: 5px;
      font-family: monospace;
      cursor: pointer;
    }

    button:hover {
      background: #00ff99;
      color: #000;
    }
  </style>
</head>
<body>

<h1>BLACKSITE TERMINAL</h1>
<div id="log"></div>
<div id="choices"></div>

<script>
  const log = document.getElementById("log");
  const choices = document.getElementById("choices");

  let realIntegrity = 100;
  let realTrace = 0;
  let realAccess = 0;

  let corrupted = false;
  let exploitSeed = Math.random();
  let gameOver = false;

  function fake(n) {
    return Math.max(0, Math.min(100, n + Math.floor(Math.random() * 21 - 10)));
  }

  function write(text) {
    log.textContent =
      text +
      "\n\nSYSTEM READOUT (UNRELIABLE):" +
      "\nIntegrity: " + fake(realIntegrity) + "%" +
      "\nTrace: " + fake(realTrace) + "%" +
      "\nAccess Fragments: " + fake(realAccess) + "%";
  }

  function clear() {
    choices.innerHTML = "";
  }

  function btn(label, fn) {
    const b = document.createElement("button");
    b.textContent = label;
    b.onclick = fn;
    choices.appendChild(b);
  }

  function checkEnd() {
    if (realTrace >= 100) {
      gameOver = true;
      write("TRACE COMPLETE.\nBLACKSITE RESPONSE DEPLOYED.\nYou are done.");
      clear();
    }

    if (realIntegrity <= 0) {
      gameOver = true;
      write("SYSTEM COLLAPSE.\nDATA IRRECOVERABLE.\nMISSION FAILED.");
      clear();
    }

    if (realAccess >= 100 && realTrace < 80) {
      gameOver = true;
      write("ACCESS ROOTED.\nDATA EXFILTRATED.\nNO TRACE LEFT.\nYOU WIN.");
      clear();
    }
  }

  function scan() {
    if (gameOver) return;

    realIntegrity -= 8;
    realTrace += 12;

    if (Math.random() < 0.25) corrupted = true;

    realAccess += corrupted ? 4 : 10;

    write(corrupted
      ? "SCAN COMPLETE.\nWARNING: DATA CORRUPTION DETECTED."
      : "SCAN COMPLETE.\nADMIN STRUCTURE MAPPED."
    );

    checkEnd();
  }

  function exploit() {
    if (gameOver) return;

    realTrace += 20;

    if (exploitSeed < 0.33) {
      realIntegrity -= 30;
      write("EXPLOIT FAILED.\nSYSTEM HARDENED.");
    } else if (exploitSeed < 0.66) {
      realAccess += 25;
      write("EXPLOIT PARTIAL.\nLIMITED ACCESS GAINED.");
    } else {
      realAccess += 40;
      realTrace += 20;
      write("EXPLOIT SUCCESS.\nSECURITY FLAGS RAISED.");
    }

    exploitSeed = Math.random();
    checkEnd();
  }

  function brute() {
    if (gameOver) return;

    realTrace += 45;
    realAccess += 15;
    write("BRUTE FORCE RUNNING.\nSIGNATURES DETECTED.");
    checkEnd();
  }

  function purge() {
    if (gameOver) return;

    corrupted = false;
    realIntegrity -= 15;
    realTrace -= 10;
    write("MEMORY PURGE COMPLETE.\nLOGS PARTIALLY CLEARED.");
    checkEnd();
  }

  function disconnect() {
    gameOver = true;
    write("MANUAL DISCONNECT.\nNO DATA.\nNO TRACE.\nSURVIVAL ENDING.");
    clear();
  }

  function start() {
    write(
      "BLACKSITE NODE ONLINE.\n" +
      "READOUTS MAY BE COMPROMISED.\n" +
      "TRUST NOTHING.\nMOVE CAREFULLY."
    );

    btn("Scan sectors", scan);
    btn("Inject exploit", exploit);
    btn("Brute force", brute);
    btn("Purge memory", purge);
    btn("Disconnect", disconnect);
  }

  start();
</script>

</body>
</html>
